# Desc: Runs "damage_tool" NBT.
#
# Called By: more_nbt:main_tick

# reset score
scoreboard players set @p Damage 0
scoreboard players set @p Damage.Deal 0
# get current Damage & Damage remove and set to scoreboard
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] store result score @p Damage run data get entity @p SelectedItem.tag.Damage
execute at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] store result score @p Damage.Deal run data get entity @p SelectedItem.tag.damage_tool.amount
# add set remove to damage from item NBT then apply Damage scoreboard to storage
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] store result storage more_nbt:global_storage damage_tool.Damage int 1 run scoreboard players operation @p Damage += @p Damage.Deal
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] run item entity @p weapon.mainhand modify more_nbt:damage_tool
# Preset Item max duribility
    # play broken sound when broken
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:carrot_on_a_stick",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 25.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:warped_fungus_on_a_stick",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 100.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 131.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 32.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 1561.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_sword",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 131.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 32.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 1561.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_shovel",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 131.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 32.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 1561.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_pickaxe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 131.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 32.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 1561.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_axe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 131.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 32.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 1561.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_hoe",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 59.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:bow",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 384.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:crossbow",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 326.. run playsound minecraft:entity.item.break player @p
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:trident",tag:{damage_tool:{disappears:1b,break_sound:1b}}}}] if score @p Damage matches 250.. run playsound minecraft:entity.item.break player @p
    # remove item when broken
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:carrot_on_a_stick",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 25.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:warped_fungus_on_a_stick",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 100.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 59.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 131.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 32.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 1561.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_sword",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 2031.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 59.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 131.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 32.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 1561.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_shovel",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 2031.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 59.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 131.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 32.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 1561.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_pickaxe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 2031.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 59.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 131.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 32.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 1561.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_axe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 2031.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:wooden_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 59.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:stone_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 131.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:golden_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 32.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:iron_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:diamond_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 1561.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:netherite_hoe",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 2031.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:bow",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 384.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:crossbow",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 326.. run item entity @p weapon.mainhand replace air
execute at @p[nbt=!{SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{Count:1b,id:"minecraft:trident",tag:{damage_tool:{disappears:1b}}}}] if score @p Damage matches 250.. run item entity @p weapon.mainhand replace air
# Custom item durability
execute at @p[nbt={SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] store result storage more_nbt:global_storage damage_tool.Damage int 1 run scoreboard players operation @p durability -= @p Damage.Deal
execute at @p[nbt={SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] run item entity @p weapon.mainhand modify more_nbt:damage_tool_durability

execute at @p[nbt={SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] if score @p durability matches ..0 run playsound minecraft:entity.item.break player @p
execute at @p[nbt={SelectedItem:{tag:{durability:{}}}}] at @p[nbt={SelectedItem:{tag:{damage_tool:{}}}}] if score @p durability matches ..0 run item entity @p weapon.mainhand replace air